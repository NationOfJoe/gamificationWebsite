<!DOCTYPE html>
<html class="no-js" lang="en-US" prefix="og: https://ogp.me/ns# fb: https://ogp.me/ns/fb#">
<html lang="en" class="js csstransforms3d">
<head>
  <meta charset="utf-8">
  <meta property="og:title" content="Spot Ocean Workshop" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="generator" content="Hugo 0.84.0" />
  <meta name="description" content="Spot Workshop">
<meta name="author" content="Amit Bar Oz, Zak Harabedian, Eric Knauer ">

  <link rel="shortcut icon" href="https://a0.awsstatic.com/libra-css/images/site/fav/favicon.ico" type="image/ico" />
<link rel="icon" href="https://a0.awsstatic.com/libra-css/images/site/fav/favicon.ico" type="image/ico" />

  <title>Assigning Pods to Nodes :: Spot Ocean Workshop</title>

  
  <link href="../../css/nucleus.css" rel="stylesheet">
  <link href="../../css/fontawesome-all.min.css" rel="stylesheet">
  <link href="../../css/hybrid.css" rel="stylesheet">
  <link href="../../css/featherlight.min.css" rel="stylesheet">
  <link href="../../css/perfect-scrollbar.min.css" rel="stylesheet">
  <link href="../../css/auto-complete.css" rel="stylesheet">
  <link href="../../css/atom-one-dark-reasonable.css" rel="stylesheet">
  <link href="../../css/theme.css" rel="stylesheet">
  <link href="../../css/hugo-theme.css" rel="stylesheet">
  
  <link href="../../css/theme-blue.css" rel="stylesheet">
  

  <script src="../../js/jquery-3.5.1.min.js"></script>

  <style>
    :root #header + #content > #left > #rlblock_left{
        display:none !important;
    }
    
      :not(pre) > code + span.copy-to-clipboard {
          display: none;
      }
    
  </style>
  
</head>

<body class="" data-url="../../ocean_workshop/vng_workshop/assigning_pods_to_nodes.html">
  <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <div>
    <a href="../../" title="Go home">
        <img style="vertical-align:middle" src="../../images/logo.png" height="60px" classes="border,shadow" />

        
    </a>
</div>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="../../js/lunr.min.js"></script>
<script type="text/javascript" src="../../js/auto-complete.js"></script>
<script type="text/javascript">
    
        var baseurl = "";
    
</script>
<script type="text/javascript" src="../../js/search.js"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/welcome.html" title="Welcome" class="dd-item 
        
        
        
        ">
      <a href="../../welcome.html">
          Welcome
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/welcome/login.html" title="Agenda" class="dd-item 
        
        
        
        ">
      <a href="../../welcome/login.html">
          Agenda
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/prerequisites.html" title="Prerequisites" class="dd-item 
        
        
        
        ">
      <a href="../../prerequisites.html">
          <b> </b>Prerequisites
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/prerequisites/spot_registration.html" title="Spot Registration" class="dd-item 
        
        
        
        ">
      <a href="../../prerequisites/spot_registration.html">
          <b> </b>Spot Registration
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/prerequisites/ocean_creation.html" title="Ocean Creation" class="dd-item 
        
        
        
        ">
      <a href="../../prerequisites/ocean_creation.html">
          <b> </b>Ocean Creation
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/ocean_workshop.html" title="Ocean Workshop" class="dd-item 
        parent
        
        
        ">
      <a href="../../ocean_workshop.html">
          <b> </b>Ocean Workshop
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/ocean_workshop/vng_workshop.html" title="Virtual Node Groups (VNGs)" class="dd-item 
        parent
        
        
        ">
      <a href="../../ocean_workshop/vng_workshop.html">
          <b> </b>Virtual Node Groups (VNGs)
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/ocean_workshop/vng_workshop/assigning_pods_to_nodes.html" title="Assigning Pods to Nodes" class="dd-item 
        parent
        active
        
        ">
      <a href="../../ocean_workshop/vng_workshop/assigning_pods_to_nodes.html">
          <b> </b>Assigning Pods to Nodes
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/ocean_workshop/vng_workshop/create_vng.html" title="Creating a VNG" class="dd-item 
        
        
        
        ">
      <a href="../../ocean_workshop/vng_workshop/create_vng.html">
          <b> </b>Creating a VNG
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/ocean_workshop/vng_workshop/vng_workshop_instructions.html" title="VNG Lab" class="dd-item 
        
        
        
        ">
      <a href="../../ocean_workshop/vng_workshop/vng_workshop_instructions.html">
          <b> </b>VNG Lab
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/ocean_workshop/vng_workshop/summary.html" title="Summary" class="dd-item 
        
        
        
        ">
      <a href="../../ocean_workshop/vng_workshop/summary.html">
          <b> </b>Summary
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/ocean_workshop/headroom.html" title="Headroom" class="dd-item 
        
        
        
        ">
      <a href="../../ocean_workshop/headroom.html">
          <b> </b>Headroom
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/ocean_workshop/headroom/headroom_overview.html" title="Headroom Overview" class="dd-item 
        
        
        
        ">
      <a href="../../ocean_workshop/headroom/headroom_overview.html">
          <b> </b>Headroom Overview
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/ocean_workshop/headroom/allow_manual_headroom.html" title="Configure Manual Headroom" class="dd-item 
        
        
        
        ">
      <a href="../../ocean_workshop/headroom/allow_manual_headroom.html">
          <b> </b>Configure Manual Headroom
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/ocean_workshop/headroom/headroom_lab.html" title="Headroom Lab" class="dd-item 
        
        
        
        ">
      <a href="../../ocean_workshop/headroom/headroom_lab.html">
          <b> </b>Headroom Lab
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/ocean_workshop/headroom/summary.html" title="Summary" class="dd-item 
        
        
        
        ">
      <a href="../../ocean_workshop/headroom/summary.html">
          <b> </b>Summary
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/ocean_workshop/clean_up.html" title="Cleanup" class="dd-item 
        
        
        
        ">
      <a href="../../ocean_workshop/clean_up.html">
          <b></b>Cleanup
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/whats_next.html" title="Additional Reading" class="dd-item 
        
        
        
        ">
      <a href="../../whats_next.html">
          <b></b>Additional Reading
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="footer">
      <left>

    <a href="https://aws.amazon.com/privacy/?nc1=f_pr">Privacy</a> | <a href="https://aws.amazon.com/terms/?nc1=f_pr">Site Terms</a> | Â© 2021, Spot by NetApp, Inc. or its affiliates. All rights reserved. 

</left>

    </section>
  </div>
</nav>





  <section id="body">
    <div id="overlay"></div>
    <div class="padding highlightable">
      
      <div>
        <div id="top-bar">
          
          
          <div id="breadcrumbs" itemscope="" itemtype="https://data-vocabulary.org/Breadcrumb">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                <i class="fa fa-bars"></i>
              </a>
            </span>
            
            <span class="links">
              
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <a href='../../'>Spotlight User Conference</a> > <a href='../../ocean_workshop.html'>Ocean Workshop</a> > <a href='../../ocean_workshop/vng_workshop.html'>Virtual Node Groups (VNGs)</a> > Assigning Pods to Nodes
          
          
          
          
          
          
          
          
            </span>
          </div>
          
        </div>
      </div>
      

      
      <div id="chapter">
        
        <div id="body-inner">
          <h1>Assigning Pods to Nodes</h1>
          
          


	<p>In order to use VNGs effectively we will need to use Kubernetes constraints in order to constrain a Pod so that it can only run on a particular set of Nodes, there are several ways to do that using the <a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/" target="_blank" rel="noopener noreferrer">label selectors</a> mechanism.</p>
<hr>
<h3 id="nodeselectors">nodeSelectors</h3>
<p>nodeSelector is a field of PodSpec. It specifies a map of key-value pairs. For the pod to be eligible to run on a node, the node must have each of the indicated key-value pairs as labels
Discuss nodeLabels and taints/tolerations</p>

<div class="notices tip" ><p>The Node on which the Pod will be scheduled on can have multiple nodeLabels that are not specified on the Pod nodeSelector section.</p>
</div>

<hr>
<h3 id="affinityanti-affinity">Affinity/Anti-Affinity</h3>
<p>The affinity/anti-affinity feature expands the types of constraints you can express. The key enhancements are (taken from the official Kubernetes <a href="https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/" target="_blank" rel="noopener noreferrer">documentation</a>):</p>
<ul>
<li>The affinity/anti-affinity language is more expressive. The language offers more matching rules besides exact matches created with a logical AND operation.</li>
<li>you can indicate that the rule is &ldquo;soft&rdquo;/&ldquo;preference&rdquo; rather than a hard requirement, so if the scheduler can&rsquo;t satisfy it, the pod will still be scheduled;</li>
<li>you can constrain against labels on other pods running on the node (or other topological domain), rather than against labels on the node itself, which allows rules about which pods can and cannot be co-located</li>
<li>The affinity feature consists of two types of affinity, &ldquo;node affinity&rdquo; and &ldquo;inter-pod affinity/anti-affinity&rdquo;. Node affinity is like the existing nodeSelector (but with the first two benefits listed above), while inter-pod affinity/anti-affinity constraints against pod labels rather than node labels, as described in the third item listed above, in addition to having the first and second properties listed above.</li>
</ul>

<div class="notices tip" ><p>Ocean will respect the required affinity/anti-affinity while making scaling decisions.</p>
</div>

<hr>
<h3 id="taintstolerations">Taints/Tolerations</h3>
<p>Taints allow a node to repel a set of pods. Tolerations are applied to pods, and allow (but do not require) the pods to schedule onto nodes with matching taints.</p>
<p>Taints and tolerations work together to ensure that pods are not scheduled onto inappropriate nodes. One or more taints are applied to a node; this marks that the node should not accept any pods that do not tolerate the taints.</p>

<div class="notices tip" ><p>Taints allow Pods who Tolerate them to be scheduled on the specific group of nodes, but it does not force that (e.g - you might also need to use nodeLabels in order to ensure the right behaviour).</p>
</div>






<footer class=" footline" >
	
</footer>

        
            </div> 
        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="../../ocean_workshop/vng_workshop.html" title="Virtual Node Groups (VNGs)"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="../../ocean_workshop/vng_workshop/create_vng.html" title="Creating a VNG" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="../../js/clipboard.min.js"></script>
    <script src="../../js/perfect-scrollbar.min.js"></script>
    <script src="../../js/perfect-scrollbar.jquery.min.js"></script>
    <script src="../../js/jquery.sticky.js"></script>
    <script src="../../js/featherlight.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../../js/modernizr.custom-3.6.0.js"></script>
    <script src="../../js/learn.js"></script>
    <script src="../../js/hugo-learn.js"></script>
    
        
            <script src="../../mermaid/mermaid.js"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    
  </body>
</html>
